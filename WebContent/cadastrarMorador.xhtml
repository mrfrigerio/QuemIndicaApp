<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" 
	  xmlns:f="http://xmlns.jcp.org/jsf/core" 
	  xmlns:h="http://xmlns.jcp.org/jsf/html" 
	  xmlns:p="http://primefaces.org/ui">

<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
	<title>Quem Indica Indicações</title>
</h:head>

<h:body>

	<h:form id="form">

		<h:inputHidden value="#{formMoradorBean.morador.id}" />
		<p:messages />
		<p:panelGrid columns="2">

			<f:facet name="header">Cadastro de Moradores</f:facet>

			<p:outputLabel for="nome" value="Nome:" />
			<p:inputText id="nome" value="#{formMoradorBean.morador.nome}" size="50" required="true" />

			<p:outputLabel for="email" value="e-mail:" />
			<p:inputText id="email" value="#{formMoradorBean.morador.email}" size="50" type="email" required="true" />

			<p:outputLabel value="Telefone fixo:" />
			<h:panelGroup>
				<p:inputText value="#{formMoradorBean.morador.telefone.dddTelefoneFixo}" size="2" maxlength="2" />
				<p:inputText value="#{formMoradorBean.morador.telefone.numeroTelefoneFixo}">
					<f:validator validatorId="telefoneValidator" />
				</p:inputText>
			</h:panelGroup>

			<p:outputLabel value="Telefone celular:" />
			<h:panelGroup>
				<p:inputText value="#{formMoradorBean.morador.telefone.dddTelefoneCelular}" size="2" maxlength="2" />
				<p:inputText value="#{formMoradorBean.morador.telefone.numeroTelefoneCelular}">
					<f:validator validatorId="telefoneValidator" />
				</p:inputText>
			</h:panelGroup>

			<p:outputLabel for="frmCondominio" value="Condomínio:" />
			<p:autoComplete id="frmCondominio" value="#{formMoradorBean.morador.condominio}" required="true" dropdown="true" forceSelection="true"
							completeMethod="#{formMoradorBean.condominioAutocomplete}" 
							var="c"
							itemLabel="#{c.nome}"
							itemValue="#{c}"
							converter="condominioConverter">
				<p:ajax process="@this" update="form:frmBloco" event="itemSelect" partialSubmit="true"/>
			</p:autoComplete>
			
			<p:outputLabel for="frmBloco" value="Bloco:" />				
			<p:autoComplete id="frmBloco" value="#{formMoradorBean.morador.bloco}" required="true" dropdown="true" forceSelection="true"
							completeMethod="#{formMoradorBean.blocoAutocomplete}" 
							var="b"
							itemLabel="#{b.nome}"
							itemValue="#{b}"
							converter="blocoConverter"/>

			<p:outputLabel value="Unidade:" />
			<p:inputText value="#{formMoradorBean.morador.unidade}" required="true" />

			<p:outputLabel for="pwd1" value="Senha:" />
			<p:password id="pwd1" value="#{formMoradorBean.morador.senha}" match="pwd2" required="true" feedback="true" 
						validatorMessage="As senhas não conferem!" 
						promptLabel="Digite uma senha."/>

			<p:outputLabel for="pwd2" value="Confirmação de Senha:" />
			<p:password id="pwd2" value="#{formMoradorBean.passwordCheck}" required="true" feedback="true" promptLabel="Confirme a senha digitada." />

			<f:facet name="footer">
				<p:commandButton value="Gravar" action="#{formMoradorBean.gravar}" process="@form" update="@form" />
			</f:facet>
		</p:panelGrid>


	</h:form>
</h:body>
</html>